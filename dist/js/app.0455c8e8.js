(function(e){function t(t){for(var a,r,o=t[0],u=t[1],s=t[2],l=0,d=[];l<o.length;l++)r=o[l],Object.prototype.hasOwnProperty.call(c,r)&&c[r]&&d.push(c[r][0]),c[r]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);f&&f(t);while(d.length)d.shift()();return i.push.apply(i,s||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,r=1;r<n.length;r++){var o=n[r];0!==c[o]&&(a=!1)}a&&(i.splice(t--,1),e=u(u.s=n[0]))}return e}var a={},r={app:0},c={app:0},i=[];function o(e){return u.p+"js/"+({}[e]||e)+"."+{"chunk-1b3dc104":"d632fa92","chunk-3958691b":"635db221","chunk-4114ebdc":"f4ddb39e","chunk-54e532c0":"76801293","chunk-6d42a708":"0d0fdcf9","chunk-cfdd05e6":"767a6919"}[e]+".js"}function u(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n={"chunk-1b3dc104":1,"chunk-3958691b":1,"chunk-54e532c0":1,"chunk-6d42a708":1,"chunk-cfdd05e6":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var a="css/"+({}[e]||e)+"."+{"chunk-1b3dc104":"5c1f09b2","chunk-3958691b":"ea3aa571","chunk-4114ebdc":"31d6cfe0","chunk-54e532c0":"a274f38f","chunk-6d42a708":"4886d953","chunk-cfdd05e6":"9a58dd4b"}[e]+".css",c=u.p+a,i=document.getElementsByTagName("link"),o=0;o<i.length;o++){var s=i[o],l=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(l===a||l===c))return t()}var d=document.getElementsByTagName("style");for(o=0;o<d.length;o++){s=d[o],l=s.getAttribute("data-href");if(l===a||l===c)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var a=t&&t.target&&t.target.src||c,i=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=a,delete r[e],f.parentNode.removeChild(f),n(i)},f.href=c;var h=document.getElementsByTagName("head")[0];h.appendChild(f)})).then((function(){r[e]=0})));var a=c[e];if(0!==a)if(a)t.push(a[2]);else{var i=new Promise((function(t,n){a=c[e]=[t,n]}));t.push(a[2]=i);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=o(e);var d=new Error;s=function(t){l.onerror=l.onload=null,clearTimeout(f);var n=c[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",d.name="ChunkLoadError",d.type=a,d.request=r,n[1](d)}c[e]=void 0}};var f=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(t)},u.m=e,u.c=a,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)u.d(n,a,function(t){return e[t]}.bind(null,a));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="",u.oe=function(e){throw e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var f=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0b37":function(e,t,n){},"0f73":function(e,t,n){},1517:function(e,t,n){"use strict";n("9bb0")},"1a3d":function(e,t,n){"use strict";n("0f73")},2423:function(e,t,n){"use strict";n.d(t,"g",(function(){return r})),n.d(t,"e",(function(){return c})),n.d(t,"h",(function(){return i})),n.d(t,"f",(function(){return o})),n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return d}));var a=n("b775"),r=function(e,t){return Object(a["a"])({method:"get",url:"/app/v1_1/articles",params:{channel_id:e,timestamp:t,with_top:1}})},c=function(e){return Object(a["a"])({method:"post",url:"/app/v1_0/article/dislikes",data:{target:e}})},i=function(e,t){return Object(a["a"])({method:"post",url:"/app/v1_0/article/reports",data:{target:e,type:t}})},o=function(e){return Object(a["a"])({method:"get",url:"/app/v1_0/articles/".concat(e)})},u=function(e){return Object(a["a"])({method:"post",url:"/app/v1_0/article/likings",data:{target:e}})},s=function(e){return Object(a["a"])({method:"delete",url:"/app/v1_0/article/likings/".concat(e)})},l=function(e){return Object(a["a"])({method:"post",url:"/app/v1_0/article/dislikes",data:{target:e}})},d=function(e){return Object(a["a"])({method:"delete",url:"/app/v1_0/article/dislikes/".concat(e)})}},4360:function(e,t,n){"use strict";n("4de4"),n("c740"),n("96cf");var a=n("1da1"),r=n("2b0e"),c=n("2f62"),i=n("5d2d"),o=n("5986");r["a"].use(c["a"]),t["a"]=new c["a"].Store({state:{tokenInfo:Object(i["b"])(),channels:[],allChannels:[]},mutations:{setTokenInfo:function(e,t){e.tokenInfo=t,Object(i["e"])(t)},removeToken:function(e){e.tokenInfo={},Object(i["c"])()},setChannels:function(e,t){e.channels=t},addChannel:function(e,t){e.channels.push(t)},delChannel:function(e,t){e.channels=e.channels.filter((function(e){return e.id!==t.id}))},setAllChannels:function(e,t){e.allChannels=t}},actions:{getChannelsAsync:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["b"])();case 2:n=t.sent,e.commit("setChannels",n.data.data.channels);case 4:case"end":return t.stop()}}),t)})))()},getAllChannelsAsync:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["a"])();case 2:n=t.sent,e.commit("setAllChannels",n.data.data.channels);case 4:case"end":return t.stop()}}),t)})))()}},getters:{optionalChannels:function(e){var t=e.allChannels.filter((function(t){var n=e.channels.findIndex((function(e){return e.id===t.id}));return-1===n}));return t}}})},"56d7":function(e,t,n){"use strict";n.r(t);n("4de4"),n("e260"),n("e6cf"),n("cca65"),n("a79d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("keep-alive",[e.$route.meta.isKeepAlive?n("router-view"):e._e()],1),e.$route.meta.isKeepAlive?e._e():n("router-view")],1)},c=[],i={},o=i,u=(n("5c0b"),n("2877")),s=Object(u["a"])(o,r,c,!1,null,null,null),l=s.exports,d=n("a18c"),f=n("4360"),h=n("b775"),p=(n("bda7"),n("5e46")),v=(n("da3c"),n("0b33")),m=(n("a52c"),n("2ed4")),b=(n("537a"),n("ac28")),g=(n("e7e5"),n("d399")),k=(n("be7f"),n("565f")),_=(n("0653"),n("34e9")),O=(n("5246"),n("6b41")),w=(n("b000"),n("1a23")),j=(n("66b9"),n("b650")),y=(n("2994"),n("2bdd")),C=(n("c194"),n("7744")),x=(n("0ec5"),n("21ab")),$=(n("3df5"),n("2830")),R=(n("4056"),n("44bf")),I=(n("ab71"),n("58e6")),A=(n("66cf"),n("343b")),E=(n("8a58"),n("e41f")),S=(n("c3a6"),n("ad06")),T=(n("2cbd"),n("ab2c")),L=(n("5852"),n("d961")),P=(n("ac1e"),n("543e")),M=(n("2b28"),n("9ed2")),q=(n("81e6"),n("9ffb")),N=(n("4d48"),n("d1e1")),B=(n("5f1a"),n("a3e2")),z=(n("e17f"),n("2241")),D=(n("d1cf"),n("ee83"));a["a"].use(D["a"]),a["a"].use(z["a"]),a["a"].use(B["a"]),a["a"].use(N["a"]),a["a"].use(q["a"]),a["a"].use(M["a"]),a["a"].use(P["a"]),a["a"].use(L["a"]),a["a"].use(T["a"]),a["a"].use(S["a"]),a["a"].use(E["a"]),a["a"].use(A["a"]),a["a"].use(I["a"]),a["a"].use(R["a"]),a["a"].use($["a"]),a["a"].use(x["a"]),a["a"].use(C["a"]),a["a"].use(y["a"]),a["a"].use(j["a"]),a["a"].use(w["a"]),a["a"].use(O["a"]),a["a"].use(_["a"]),a["a"].use(k["a"]),a["a"].use(g["a"]),a["a"].use(b["a"]),a["a"].use(m["a"]),a["a"].use(v["a"]),a["a"].use(p["a"]);n("5cfb"),n("b20f");var J=n("5a0c"),K=n.n(J),H=n("4208"),U=n.n(H);n("a471");function F(e){return K()(e).fromNow()}K.a.extend(U.a),K.a.locale("zh-cn"),a["a"].prototype.$http=h["a"],a["a"].config.productionTip=!1,a["a"].prototype.$eventBus=new a["a"],a["a"].filter("relative",(function(e){return F(e)})),new a["a"]({router:d["a"],store:f["a"],render:function(e){return e(l)}}).$mount("#app")},5986:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return i}));var a=n("b775"),r=function(){return Object(a["a"])({method:"get",url:"/app/v1_0/user/channels"})},c=function(){return Object(a["a"])({method:"get",url:"/app/v1_0/channels"})},i=function(e){return Object(a["a"])({method:"put",url:"/app/v1_0/user/channels",data:{channels:e}})}},"5c0b":function(e,t,n){"use strict";n("9c0c")},"5d2d":function(e,t,n){"use strict";n.d(t,"e",(function(){return c})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return s}));var a="hm-mobile-70-token",r="hm-mobile-70-history",c=function(e){localStorage.setItem(a,JSON.stringify(e))},i=function(){return JSON.parse(localStorage.getItem(a))||{}},o=function(){localStorage.removeItem(a)},u=function(){return JSON.parse(localStorage.getItem(r))||[]},s=function(e){localStorage.setItem(r,JSON.stringify(e))}},"5e47":function(e,t,n){"use strict";n("cca6")},7355:function(e,t,n){"use strict";n("ff76")},"9bb0":function(e,t,n){},"9c0c":function(e,t,n){},a18c:function(e,t,n){"use strict";n("caad"),n("d3b7");var a=n("2b0e"),r=n("8c4f"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login"},[n("van-nav-bar",{attrs:{title:"登录"}}),n("van-cell-group",[n("van-field",{attrs:{required:"",label:"手机号",placeholder:"请输入手机号","error-message":e.mobile_errmsg},model:{value:e.mobile,callback:function(t){e.mobile=t},expression:"mobile"}}),n("van-field",{attrs:{required:"",label:"验证码",placeholder:"请输入验证码","error-message":e.code_errmsg},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1),n("div",{staticClass:"btn-wrap"},[n("van-button",{attrs:{type:"info"},on:{click:e.login}},[e._v("登录")])],1)],1)},i=[],o=(n("498a"),n("96cf"),n("1da1")),u=n("5530"),s=n("c24f"),l=n("2f62"),d={name:"Login",data:function(){return{mobile:"13912345678",code:"246810",mobile_errmsg:"",code_errmsg:""}},methods:Object(u["a"])(Object(u["a"])({},Object(l["d"])(["setTokenInfo"])),{},{validate:function(){return""===this.mobile.trim()?(this.mobile_errmsg="手机号不能为空",!1):/^1\d{10}$/.test(this.mobile)?(this.mobile_errmsg="",""===this.code.trim()?(this.code_errmsg="验证码不能为空",!1):/^\d{6}$/.test(this.code)?(this.code_errmsg="",!0):(this.code_errmsg="请输入正确的六位数字验证码",!1)):(this.mobile_errmsg="手机号必须是正确的11位格式",!1)},login:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.validate(),n){t.next=3;break}return t.abrupt("return");case 3:return e.$toast.loading({message:"拼命加载中...",forbidClick:!0,duration:0,overlay:!0}),t.prev=4,t.next=7,Object(s["d"])(e.mobile,e.code);case 7:a=t.sent,e.setTokenInfo(a.data.data),e.$toast.success("登录成功"),r=e.$route.query.backto,e.$router.push(r||"/"),t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](4),e.$toast.fail("手机号或者验证码有误");case 18:case"end":return t.stop()}}),t,null,[[4,14]])})))()},getInfo:function(){return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["b"])();case 2:e.sent;case 4:case"end":return e.stop()}}),e)})))()}})},f=d,h=(n("1517"),n("2877")),p=Object(h["a"])(f,c,i,!1,null,"13b2c987",null),v=p.exports,m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"layout-container"},["/user"!==e.$route.path?n("van-nav-bar",{attrs:{fixed:""},scopedSlots:e._u([{key:"left",fn:function(){return[n("div",{staticClass:"logo",on:{click:function(t){return e.$router.push("/")}}})]},proxy:!0},{key:"right",fn:function(){return[n("van-button",{staticClass:"search-btn",attrs:{round:"",type:"info",size:"small",icon:"search"},on:{click:function(t){return e.$router.push("/search")}}},[e._v(" 搜索 ")])]},proxy:!0}],null,!1,1575497470)}):e._e(),n("router-view"),n("van-tabbar",{attrs:{route:""}},[n("van-tabbar-item",{attrs:{to:"/",icon:"home-o"}},[e._v("首页")]),n("van-tabbar-item",{attrs:{to:"/question",icon:"chat-o"}},[e._v("问答")]),n("van-tabbar-item",{attrs:{to:"/video",icon:"video-o"}},[e._v("视频")]),n("van-tabbar-item",{attrs:{to:"/user",icon:"user-o"}},[e._v("我的")])],1)],1)},b=[],g={name:"LayoutIndex"},k=g,_=(n("5e47"),Object(h["a"])(k,m,b,!1,null,null,null)),O=_.exports,w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("van-tabs",{model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},e._l(e.channels,(function(t){return n("van-tab",{key:t.id,attrs:{title:t.name}},[n("article-list",{attrs:{channel:t},on:{"show-more":e.handleShowmore}})],1)})),1),n("div",{staticClass:"bar-btn",on:{click:function(t){e.showChannelEdit=!0}}},[n("van-icon",{attrs:{name:"wap-nav"}})],1),n("van-popup",{style:{width:"60%"},model:{value:e.showMore,callback:function(t){e.showMore=t},expression:"showMore"}},[n("more-action",{ref:"refMoreAction",on:{report:e.report,dislike:e.dislike}})],1),n("van-action-sheet",{attrs:{title:"频道管理"},model:{value:e.showChannelEdit,callback:function(t){e.showChannelEdit=t},expression:"showChannelEdit"}},[n("channel-edit",{attrs:{active:e.active},on:{"update-active":e.updateActive,"update-curchannel":e.updateCurrentChannel}})],1)],1)},j=[],y=n("2423"),C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"articleList",staticClass:"article-list",on:{scroll:e.scroll}},[n("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.isRefreshing,callback:function(t){e.isRefreshing=t},expression:"isRefreshing"}},[n("van-list",{attrs:{finished:e.finished,"finished-text":"没有更多了"},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.list,(function(t){return n("van-cell",{key:t.art_id.toString(),attrs:{title:t.title},on:{click:function(n){e.$router.push("/article/"+t.art_id.toString())}},scopedSlots:e._u([{key:"label",fn:function(){return[n("van-grid",{attrs:{"column-num":t.cover.images.length}},[e._l(t.cover.images,(function(e,t){return n("van-grid-item",{key:t,attrs:{icon:"photo-o",text:"文字"}},[n("van-image",{attrs:{"lazy-load":"",src:e}})],1)})),n("div",{staticClass:"meta"},[n("span",[e._v(e._s(t.aut_name))]),n("span",[e._v(e._s(t.comm_count)+" 评论")]),n("span",[e._v(e._s(e._f("relative")(t.pubdate)))]),e.tokenInfo.token?n("div",{staticClass:"right-icon",on:{click:function(n){return n.stopPropagation(),e.close(t)}}},[n("van-icon",{attrs:{name:"cross"}})],1):e._e()])],2)]},proxy:!0}],null,!0)})})),1)],1)],1)},x=[],$=(n("99af"),n("4de4"),n("25f0"),n("2909")),R={name:"ArticleList",created:function(){var e=this;this.$eventBus.$on("del-article",(function(t){t.channelId===e.channel.id&&(e.list=e.list.filter((function(e){return e.art_id.toString()!==t.articleId})))}))},activated:function(){this.$refs.articleList.scrollTop=this.scrollTop},deactivated:function(){},props:["channel"],data:function(){return{timestamp:null,list:[],loading:!1,finished:!1,isRefreshing:!1,scrollTop:0}},methods:{onLoad:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.timestamp||(e.timestamp=+new Date),t.next=4,Object(y["g"])(e.channel.id,e.timestamp);case 4:n=t.sent,e.timestamp=n.data.data.pre_timestamp,a=n.data.data.results,e.list=[].concat(Object($["a"])(e.list),Object($["a"])(a)),e.loading=!1,0===a.length&&(e.finished=!0);case 10:case"end":return t.stop()}}),t)})))()},onRefresh:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(y["g"])(e.channel.id,+new Date);case 2:n=t.sent,e.timestamp=n.data.data.pre_timestamp,e.list=n.data.data.results,e.isRefreshing=!1,e.$toast.success("刷新成功"),e.onLoad();case 8:case"end":return t.stop()}}),t)})))()},close:function(e){this.$emit("show-more",e.art_id.toString())},scroll:function(e){this.scrollTop=e.target.scrollTop}},computed:Object(u["a"])({},Object(l["e"])(["tokenInfo"]))},I=R,A=(n("da3b"),Object(h["a"])(I,C,x,!1,null,"1fd3d8a3",null)),E=A.exports,S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"more-action"},[e.isReport?n("van-cell-group",[n("van-cell",{attrs:{icon:"arrow-left"},on:{click:function(t){e.isReport=!1}}},[e._v("返回")]),e._l(e.reportsList,(function(t){return n("van-cell",{key:t.value,on:{click:function(n){return e.$emit("report",t.value)}}},[e._v(e._s(t.label))])}))],2):n("van-cell-group",[n("van-cell",{on:{click:function(t){return e.$emit("dislike")}}},[e._v("不感兴趣")]),n("van-cell",{attrs:{"is-link":""},on:{click:function(t){e.isReport=!0}}},[e._v("反馈垃圾内容")]),n("van-cell",[e._v("拉黑作者")])],1)],1)},T=[],L=[{value:0,label:"其它问题"},{value:1,label:"标题夸张"},{value:2,label:"低俗色情"},{value:3,label:"错别字多"},{value:4,label:"旧闻重复"},{value:6,label:"内容不实"},{value:8,label:"侵权"},{value:7,label:"涉嫌违法犯罪"}],P=L,M={name:"MoreAction",data:function(){return{isReport:!1,reportsList:P}}},q=M,N=(n("7355"),Object(h["a"])(q,S,T,!1,null,"2cb29999",null)),B=N.exports,z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"channel-edit"},[n("div",{staticClass:"channel"},[n("van-cell",{attrs:{title:"我的频道",border:!1}},[n("van-button",{attrs:{plain:"",size:"mini",type:"danger"},on:{click:function(t){e.editing=!e.editing}}},[e._v(" "+e._s(e.editing?"取消":"编辑")+" ")])],1),n("van-grid",e._l(e.channels,(function(t,a){return n("van-grid-item",{key:t.id,class:{current:e.active===a},on:{click:function(t){return e.clickChannel(a)}}},[n("span",[e._v(e._s(t.name))]),n("van-icon",{directives:[{name:"show",rawName:"v-show",value:e.editing&&0!==a,expression:"editing && index !== 0"}],staticClass:"btn",attrs:{name:"cross"},on:{click:function(n){return e.clickDelChannel(t,a)}}})],1)})),1)],1),n("div",{staticClass:"channel"},[n("van-cell",{attrs:{title:"可选频道",border:!1}}),n("van-grid",e._l(e.optionalChannels,(function(t){return n("van-grid-item",{key:t.id,on:{click:function(n){return e.clickAddChannel(t)}}},[n("span",[e._v(e._s(t.name))])])})),1)],1)])},D=[],J=(n("d81d"),n("a9e3"),n("5986")),K={name:"ChannelEdit",props:{active:{type:Number,required:!1,default:0}},computed:Object(u["a"])(Object(u["a"])({},Object(l["e"])(["channels"])),Object(l["c"])(["optionalChannels"])),methods:Object(u["a"])(Object(u["a"])(Object(u["a"])({},Object(l["b"])(["getAllChannelsAsync"])),Object(l["d"])(["addChannel","delChannel"])),{},{clickChannel:function(e){this.editing||this.$emit("update-curchannel",e)},clickAddChannel:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.addChannel(e),t.resetChannels();case 2:case"end":return n.stop()}}),n)})))()},clickDelChannel:function(e,t){this.active===t&&this.$emit("update-active",0),t<this.active&&this.$emit("update-active",this.active-1),this.delChannel(e),this.resetChannels()},resetChannels:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.channels.map((function(e,t){return{id:e.id,seq:t}})),n.shift(),t.next=4,Object(J["c"])(n);case 4:case"end":return t.stop()}}),t)})))()}}),created:function(){this.getAllChannelsAsync()},data:function(){return{editing:!1}}},H=K,U=(n("1a3d"),Object(h["a"])(H,z,D,!1,null,"783ffa85",null)),F=U.exports,Q={name:"HomeIndex",data:function(){return{active:0,showMore:!1,articleId:null,showChannelEdit:!1}},created:function(){this.getChannelsAsync()},computed:Object(u["a"])({},Object(l["e"])(["channels"])),methods:Object(u["a"])(Object(u["a"])({},Object(l["b"])(["getChannelsAsync"])),{},{handleShowmore:function(e){var t=this;this.showMore=!0,this.articleId=e,this.$nextTick((function(){t.$refs.refMoreAction.isReport=!1}))},dislike:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(y["e"])(e.articleId);case 2:e.showMore=!1,e.$eventBus.$emit("del-article",{channelId:e.channels[e.active].id,articleId:e.articleId});case 4:case"end":return t.stop()}}),t)})))()},report:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(y["h"])(t.articleId,e);case 2:t.showMore=!1,t.$eventBus.$emit("del-article",{channelId:t.channels[t.active].id,articleId:t.articleId});case 4:case"end":return n.stop()}}),n)})))()},updateCurrentChannel:function(e){this.active=e,this.showChannelEdit=!1},updateActive:function(e){this.active=e}}),components:{ArticleList:E,MoreAction:B,ChannelEdit:F}},V=Q,G=(n("b113"),n("fca8"),Object(h["a"])(V,w,j,!1,null,"06e7849e",null)),W=G.exports,X=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"question"},[e._v("我是问答")])},Y=[],Z={name:"QuestionIndex"},ee=Z,te=Object(h["a"])(ee,X,Y,!1,null,null,null),ne=te.exports,ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"video"},[e._v("我是视频")])},re=[],ce={name:"VideoIndex"},ie=ce,oe=Object(h["a"])(ie,ae,re,!1,null,null,null),ue=oe.exports,se=n("4360"),le=function(){return n.e("chunk-6d42a708").then(n.bind(null,"e382"))},de=function(){return n.e("chunk-4114ebdc").then(n.bind(null,"efe3"))},fe=function(){return n.e("chunk-1b3dc104").then(n.bind(null,"f799"))},he=function(){return n.e("chunk-54e532c0").then(n.bind(null,"230c"))},pe=function(){return n.e("chunk-3958691b").then(n.bind(null,"669d"))},ve=function(){return n.e("chunk-cfdd05e6").then(n.bind(null,"5b57"))};a["a"].use(r["a"]);var me=r["a"].prototype.push;r["a"].prototype.push=function(e){return me.call(this,e).catch((function(e){return e}))};var be=new r["a"]({routes:[{path:"/login",component:v},{path:"/",component:O,children:[{path:"",component:W,meta:{isKeepAlive:!0}},{path:"/question",component:ne},{path:"/video",component:ue},{path:"/user",component:le}]},{path:"/search",component:de},{path:"/searchResult",component:fe},{path:"/article/:id",component:he},{path:"/userProfile",component:pe},{path:"/userChat",component:ve}]}),ge=["/user","/cart"];be.beforeEach((function(e,t,n){var a=se["a"].state.tokenInfo.token;"/login"===e.path&&a?n("/"):ge.includes(e.path)?a?n():n({path:"/login",query:{a:1,b:2,backto:e.fullPath}}):n()}));t["a"]=be},a953:function(e,t,n){},b113:function(e,t,n){"use strict";n("0b37")},b20f:function(e,t,n){},b775:function(e,t,n){"use strict";n("d3b7"),n("96cf");var a=n("1da1"),r=n("bc3a"),c=n.n(r),i=n("4360"),o=n("a18c"),u=n("d604"),s=n.n(u),l=c.a.create({baseURL:"http://ttapi.research.itcast.cn/",transformResponse:[function(e){try{return s.a.parse(e)}catch(t){return e}}]});l.interceptors.request.use((function(e){var t=i["a"].state.tokenInfo.token;return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(function(e){return Promise.reject(e)})),l.interceptors.response.use((function(e){return e}),function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(401!==t.response.status){e.next=22;break}if(n=i["a"].state.tokenInfo.refresh_token,!n){e.next=20;break}return e.prev=4,e.next=8,c()({method:"put",url:"http://ttapi.research.itcast.cn/app/v1_0/authorizations",headers:{Authorization:"Bearer ".concat(n)}});case 8:return a=e.sent,r=a.data.data.token,i["a"].commit("setTokenInfo",{refresh_token:n,token:r}),e.abrupt("return",l(t.config));case 14:e.prev=14,e.t0=e["catch"](4),i["a"].commit("removeToken"),o["a"].push({path:"/login",query:{backto:o["a"].currentRoute.fullPath}});case 18:e.next=22;break;case 20:i["a"].commit("removeToken"),o["a"].push({path:"/login",query:{backto:o["a"].currentRoute.fullPath}});case 22:return e.abrupt("return",Promise.reject(t));case 23:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t){return e.apply(this,arguments)}}()),t["a"]=l},c24f:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"c",(function(){return u})),n.d(t,"g",(function(){return s})),n.d(t,"f",(function(){return l}));var a=n("b775"),r=function(e,t){return Object(a["a"])({method:"post",url:"/app/v1_0/authorizations",data:{mobile:e,code:t}})},c=function(){return Object(a["a"])({method:"get",url:"/app/v1_0/user/profile"})},i=function(e){return Object(a["a"])({method:"post",url:"/app/v1_0/user/followings",data:{target:e}})},o=function(e){return Object(a["a"])({method:"delete",url:"/app/v1_0/user/followings/".concat(e)})},u=function(){return Object(a["a"])({method:"get",url:"/app/v1_0/user"})},s=function(e){return Object(a["a"])({method:"patch",url:"/app/v1_0/user/profile",data:e})},l=function(e){return Object(a["a"])({method:"patch",url:"/app/v1_0/user/photo",data:e})}},cca6:function(e,t,n){},cdb6:function(e,t,n){},da3b:function(e,t,n){"use strict";n("a953")},fca8:function(e,t,n){"use strict";n("cdb6")},ff76:function(e,t,n){}});
//# sourceMappingURL=app.0455c8e8.js.map